@import 'tailwindcss';

@theme {
	--font-sans:
		'Inter', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
		'Segoe UI', Roboto, sans-serif;
	--font-mono:
		'JetBrains Mono', ui-monospace, SFMono-Regular, 'SF Mono', Menlo,
		Consolas, monospace;

	/* Z-index scale */
	--z-base: 0;
	--z-sticky: 10;
	--z-dropdown: 20;
	--z-overlay: 40;
	--z-modal: 50;
	--z-toast: 60;

	/* Spacing scale (4px grid) */
	--space-1: 4px;
	--space-2: 8px;
	--space-3: 12px;
	--space-4: 16px;
	--space-6: 24px;
	--space-8: 32px;

	/* Panel widths */
	--panel-left-min: 180px;
	--panel-left-default: 240px;
	--panel-left-max: 400px;
	--panel-right-min: 260px;
	--panel-right-default: 320px;
	--panel-right-max: 480px;

	/* Border radius */
	--radius-sm: 4px;
	--radius-md: 6px;
	--radius-lg: 8px;

	/* Dark theme colors (GitHub-inspired) */
	--color-bg-dark: #0d1117;
	--color-surface-dark: #161b22;
	--color-surface-hover-dark: #21262d;
	--color-border-dark: #30363d;
	--color-border-active-dark: #a1a1aa;
	--color-text-primary-dark: #e6edf3;
	--color-text-secondary-dark: #8b949e;
	--color-text-muted-dark: #656d76;

	/* Light theme colors */
	--color-bg-light: #ffffff;
	--color-surface-light: #f6f8fa;
	--color-surface-hover-light: #f3f4f6;
	--color-border-light: #d1d5db;
	--color-border-active-light: #71717a;
	--color-text-primary-light: #1f2937;
	--color-text-secondary-light: #6b7280;
	--color-text-muted-light: #9ca3af;

	/* Accent colors */
	--color-accent: #71717a;
	--color-success-green: #22c55e;
	--color-warning-amber: #f59e0b;
	--color-danger-red: #ef4444;
}

/* Density variables */
:root {
	/* Normal density (default) */
	--density-font-size: 14px;
	--density-line-height: 1.5;
	--density-padding-sm: 0.5rem;
	--density-padding-md: 0.75rem;
	--density-padding-lg: 1rem;
	--density-gap-sm: 0.5rem;
	--density-gap-md: 0.75rem;
	--density-gap-lg: 1rem;
	--density-icon-sm: 1rem;
	--density-icon-md: 1.25rem;

	/* @pierre/diffs styling - inherited by Shadow DOM */
	--diffs-font-family: var(--font-mono);
	--diffs-header-font-family: var(--font-sans);
	--diffs-font-size: 13px;
	--diffs-line-height: 1.5;
	--diffs-tab-size: 2;
}

body.compact {
	/* Compact density */
	--density-font-size: 12px;
	--density-line-height: 1.35;
	--density-padding-sm: 0.25rem;
	--density-padding-md: 0.5rem;
	--density-padding-lg: 0.75rem;
	--density-gap-sm: 0.25rem;
	--density-gap-md: 0.5rem;
	--density-gap-lg: 0.75rem;
	--density-icon-sm: 0.75rem;
	--density-icon-md: 1rem;
}

html,
body {
	background-color: var(--color-bg-light);
	color: var(--color-text-primary-light);
	font-size: var(--density-font-size);
	line-height: var(--density-line-height);
}

html.dark,
html.dark body {
	background-color: var(--color-bg-dark);
	color: var(--color-text-primary-dark);
	color-scheme: dark;
}

/* Theme-aware CSS custom properties */
:root {
	--color-bg: var(--color-bg-light);
	--color-surface: var(--color-surface-light);
	--color-surface-hover: var(--color-surface-hover-light);
	--color-border: var(--color-border-light);
	--color-border-active: var(--color-border-active-light);
	--color-text-primary: var(--color-text-primary-light);
	--color-text-secondary: var(--color-text-secondary-light);
	--color-text-muted: var(--color-text-muted-light);
}

html.dark {
	--color-bg: var(--color-bg-dark);
	--color-surface: var(--color-surface-dark);
	--color-surface-hover: var(--color-surface-hover-dark);
	--color-border: var(--color-border-dark);
	--color-border-active: var(--color-border-active-dark);
	--color-text-primary: var(--color-text-primary-dark);
	--color-text-secondary: var(--color-text-secondary-dark);
	--color-text-muted: var(--color-text-muted-dark);
}

/* Transitions - more selective */
button,
a,
input,
textarea,
select,
[class*='transition'] {
	@apply transition-colors duration-150;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}

/* Modal animations */
[data-state='open'][data-radix-dialog-overlay] {
	animation: fadeIn 150ms ease-out;
}

[data-state='closed'][data-radix-dialog-overlay] {
	animation: fadeOut 100ms ease-in;
}

[data-state='open'][data-radix-dialog-content] {
	animation: scaleIn 150ms ease-out;
}

[data-state='closed'][data-radix-dialog-content] {
	animation: scaleOut 100ms ease-in;
}

/* Dropdown animations */
[data-state='open'][data-radix-dropdown-menu-content] {
	animation: slideDown 150ms ease-out;
}

[data-state='closed'][data-radix-dropdown-menu-content] {
	animation: slideUp 100ms ease-in;
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}
	to {
		opacity: 1;
	}
}

@keyframes fadeOut {
	from {
		opacity: 1;
	}
	to {
		opacity: 0;
	}
}

@keyframes scaleIn {
	from {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.95);
	}
	to {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1);
	}
}

@keyframes scaleOut {
	from {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1);
	}
	to {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.95);
	}
}

@keyframes slideDown {
	from {
		opacity: 0;
		transform: translateY(-4px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideUp {
	from {
		opacity: 1;
		transform: translateY(0);
	}
	to {
		opacity: 0;
		transform: translateY(-4px);
	}
}

/* Focus states */
button:focus-visible,
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
a:focus-visible {
	@apply outline-none ring-2 ring-blue-500 ring-offset-2 ring-offset-white dark:ring-offset-gray-950;
}

/* Scrollbar styling */
::-webkit-scrollbar {
	width: 8px;
	height: 8px;
}

::-webkit-scrollbar-track {
	@apply bg-transparent;
}

::-webkit-scrollbar-thumb {
	@apply bg-gray-300 dark:bg-gray-700 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
	@apply bg-gray-400 dark:bg-gray-600;
}

/* Loading spinner */
@keyframes spin {
	to {
		transform: rotate(360deg);
	}
}

.animate-spin {
	animation: spin 1s linear infinite;
}

/* Loading bar animation */
@keyframes loading {
	0% {
		transform: translateX(-100%);
	}
	50% {
		transform: translateX(200%);
	}
	100% {
		transform: translateX(-100%);
	}
}

.animate-loading {
	animation: loading 1.5s ease-in-out infinite;
}

/* Button utility classes */
.btn {
	@apply inline-flex items-center justify-center gap-2 font-medium rounded-md transition-colors;
	@apply focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2;
	@apply disabled:opacity-50 disabled:cursor-not-allowed;
}

.btn-sm {
	@apply px-2 py-1 text-xs;
}

.btn-md {
	@apply px-3 py-1.5 text-sm;
}

.btn-lg {
	@apply px-4 py-2 text-sm;
}

.btn-primary {
	@apply bg-blue-500 text-white hover:bg-blue-600;
}

.btn-secondary {
	@apply bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-700;
}

.btn-danger {
	@apply bg-red-500 text-white hover:bg-red-600;
}

.btn-ghost {
	@apply hover:bg-gray-100 dark:hover:bg-gray-800;
}

/* Screen reader only */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border-width: 0;
}

/* ============================================
   NEW DESIGN SYSTEM UTILITIES
   ============================================ */

/* Panel container */
.panel {
	background-color: var(--color-surface);
	border-color: var(--color-border);
}

/* Panel header styling */
.panel-header {
	@apply px-4 py-3 flex items-center justify-between;
	background-color: var(--color-surface);
	border-bottom: 1px solid var(--color-border);
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	color: var(--color-text-secondary);
}

/* Status pills for file status */
.status-pill {
	@apply inline-flex items-center gap-1 px-2 py-0.5 text-xs font-medium rounded-full;
}

.status-pill-added {
	@apply bg-green-500/15 text-green-600;
}
html.dark .status-pill-added {
	@apply bg-green-500/20 text-green-400;
}

.status-pill-modified {
	@apply bg-amber-500/15 text-amber-600;
}
html.dark .status-pill-modified {
	@apply bg-amber-500/20 text-amber-400;
}

.status-pill-deleted {
	@apply bg-red-500/15 text-red-600;
}
html.dark .status-pill-deleted {
	@apply bg-red-500/20 text-red-400;
}

.status-pill-renamed {
	@apply bg-blue-500/15 text-blue-600;
}
html.dark .status-pill-renamed {
	@apply bg-blue-500/20 text-blue-400;
}

/* Tree item styling for file explorer */
.tree-item {
	@apply w-full px-2 py-1.5 flex items-center gap-2 text-left transition-colors;
	border-left: 2px solid transparent;
}

.tree-item:hover {
	background-color: var(--color-surface-hover);
}

.tree-item-selected {
	background-color: var(--color-accent);
	background-color: rgba(59, 130, 246, 0.1);
	border-left-color: var(--color-accent);
}

html.dark .tree-item-selected {
	background-color: rgba(59, 130, 246, 0.15);
}

/* Tree indentation guides */
.tree-indent-guide {
	position: absolute;
	left: 0;
	top: 0;
	bottom: 0;
	width: 1px;
	background-color: var(--color-border);
}

/* Card with hover effect */
.card-hover {
	@apply border rounded-lg transition-all duration-150;
	border-color: var(--color-border);
	background-color: var(--color-surface);
}

.card-hover:hover {
	border-color: var(--color-border-active);
	box-shadow: 0 0 0 1px var(--color-border-active);
}

/* Section accordion styling for comment queue */
.section-accordion {
	border-bottom: 1px solid var(--color-border);
}

.section-accordion-header {
	@apply w-full px-4 py-3 flex items-center justify-between;
	transition: background-color 0.1s ease;
}

.section-accordion-header:hover {
	background-color: var(--color-surface-hover);
}

/* Section accent colors */
.section-queued {
	border-left: 3px solid var(--color-warning-amber);
}

.section-staged {
	border-left: 3px solid var(--color-accent);
}

.section-sent {
	border-left: 3px solid var(--color-success-green);
}

/* Count badge */
.count-badge {
	@apply inline-flex items-center justify-center px-2 py-0.5 text-xs font-medium rounded-full;
	background-color: var(--color-surface-hover);
	color: var(--color-text-secondary);
}

/* Resize handle for panels */
.resize-handle {
	@apply absolute top-0 bottom-0 w-1 cursor-col-resize z-10;
	background-color: transparent;
	transition: background-color 0.15s ease;
}

.resize-handle:hover,
.resize-handle-active {
	background-color: var(--color-accent);
}

/* Header with backdrop blur */
.header-floating {
	@apply backdrop-blur-md;
	background-color: rgba(255, 255, 255, 0.8);
	border-bottom: 1px solid var(--color-border);
}

html.dark .header-floating {
	background-color: rgba(13, 17, 23, 0.8);
}

/* Breadcrumb styling */
.breadcrumb {
	@apply flex items-center gap-1 text-sm;
	color: var(--color-text-secondary);
}

.breadcrumb-item {
	@apply hover:text-blue-500 transition-colors;
}

.breadcrumb-separator {
	color: var(--color-text-muted);
}

/* ============================================
   ANIMATION UPDATES
   ============================================ */

/* Slide in animation for comment form */
@keyframes slideInFromBottom {
	from {
		opacity: 0;
		transform: translateY(8px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.animate-slide-in {
	animation: slideInFromBottom 150ms ease-out;
}

/* Subtle scale on button press */
.btn-press:active {
	transform: scale(0.98);
}

/* Pulse animation for status indicators */
@keyframes pulse-dot {
	0%,
	100% {
		opacity: 1;
	}
	50% {
		opacity: 0.5;
	}
}

.animate-pulse-dot {
	animation: pulse-dot 2s ease-in-out infinite;
}

/* Fade in animation */
@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(4px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.animate-fade-in-up {
	animation: fadeInUp 200ms ease-out;
}

/* ============================================
   THEME-AWARE UTILITY CLASSES
   ============================================ */

/* Background colors */
.bg-theme-bg {
	background-color: var(--color-bg);
}

.bg-theme-bg-secondary {
	background-color: var(--color-surface);
}

.bg-theme-surface {
	background-color: var(--color-surface);
}

.bg-theme-surface-hover {
	background-color: var(--color-surface-hover);
}

.bg-theme-success {
	background-color: var(--color-success-green);
}

.bg-theme-warning {
	background-color: var(--color-warning-amber);
}

.bg-theme-danger {
	background-color: var(--color-danger-red);
}

.bg-theme-accent {
	background-color: var(--color-accent);
}

/* Text colors */
.text-theme-primary {
	color: var(--color-text-primary);
}

.text-theme-secondary {
	color: var(--color-text-secondary);
}

.text-theme-muted {
	color: var(--color-text-muted);
}

.text-theme-success {
	color: var(--color-success-green);
}

.text-theme-warning {
	color: var(--color-warning-amber);
}

.text-theme-danger {
	color: var(--color-danger-red);
}

.text-theme-accent {
	color: var(--color-accent);
}

/* Border colors */
.border-theme {
	border-color: var(--color-border);
}

.border-theme-active {
	border-color: var(--color-border-active);
}

/* Combined utilities for common patterns */
.theme-card {
	background-color: var(--color-surface);
	border: 1px solid var(--color-border);
}

.theme-divider {
	border-top: 1px solid var(--color-border);
}

.theme-divider-bottom {
	border-bottom: 1px solid var(--color-border);
}
